<!doctype html>
<html lang="en">
  <head>

     <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
     <meta http-equiv="Pragma" content="no-cache">
     <meta http-equiv="Expires" content="0">	  
	  
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../.././evpn-logo.png">

    <title>Cisco IOS-XR EVPN</title>

    <!-- Bootstrap core CSS -->
    <link href="../.././bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="jumbotron.css" rel="stylesheet">
  </head>

  <body>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-125156642-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-125156642-1');
</script>



  <div class="container">
    <nav class="navbar navbar-expand-md navbar-light" style="background-color: white;">
	    <!--      <a class="navbar-brand" href="https://xrdocs.github.io/">XRdocs</a> -->
      <a class="navbar-brand" href="../.././index.html"><img src="../.././evpn-logo64.png"></img> Home</a>
      <a class="navbar-brand" href="../.././tech/index.html">Technical Documents</a>
    </nav>
  </div>

  <div class="container">
	  <h1> </h1>
  </div>	  

    <main role="main">

      <!-- Main jumbotron for a primary marketing message or call to action -->

<div class="container">
  <div class="row justify-content-start">
    <div class="col-md-1">
      <img src="../../author/jichalou.jpg">
    </div>
    <div class="col-md-4">
      <h5>
         <p>Jiri Chaloupka</p>
       </h5>
       <p>Technical Marketing Engineer</p>
       <p>CCIE #39800 <a href="https://www.linkedin.com/in/jiri-chaloupka/">LinkedIn</a></p>
    </div>
  </div>
    <div class="row justify-content-start">
     <div class="col-md-2 text-muted">
	    <p>Last Update: 08/2018</p>
     </div>
  </div> 
    <div class="row justify-content-start">
     </div>
     <div class="row justify-content-start">
     <div class="col-md-1">
        <p><a class="btn btn-secondary" href="./tech2.pdf" download role="button" style="color: white; background-color: #54B9E7; border-color: #54B9E7;">PDF</a></p>
     </div>
     <div class="col-md-1">
        <p><a class="btn btn-secondary" href="./config_tech2.zip" download role="button" style="color: white; background-color: #54B9E7; border-color: #54B9E7;">Configuration</a></p>
     </div>
     </div>

</div>
    
<div class="container"> 

<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<title>MS Word Template_102504</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Helvetica;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Courier;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:PMingLiU;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:"CiscoSans Light";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"Arial Black";
	panose-1:2 11 10 4 2 1 2 2 2 4;}
@font-face
	{font-family:Times;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:CiscoSans;
	panose-1:2 11 5 3 2 2 1 2 3 3;}
@font-face
	{font-family:"CiscoSans Heavy";
	panose-1:2 11 9 3 2 2 1 2 3 3;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@PMingLiU";
	panose-1:2 1 6 1 0 1 1 1 1 1;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:Times;}
h1
	{margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Arial",sans-serif;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:2.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:"Cambria",serif;
	color:#365F91;
	font-weight:normal;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:2.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Cambria",serif;
	color:#243F60;
	font-weight:normal;}
h4
	{mso-style-link:"Heading 4 Char";
	margin-top:2.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Cambria",serif;
	color:#365F91;
	font-weight:normal;
	font-style:italic;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Calibri",sans-serif;
	font-weight:bold;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:12.0pt;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;
	font-weight:bold;}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:24.0pt;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoToc5, li.MsoToc5, div.MsoToc5
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:48.0pt;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoToc6, li.MsoToc6, div.MsoToc6
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:60.0pt;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoToc7, li.MsoToc7, div.MsoToc7
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:1.0in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoToc8, li.MsoToc8, div.MsoToc8
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:84.0pt;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoToc9, li.MsoToc9, div.MsoToc9
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:96.0pt;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoFootnoteText, li.MsoFootnoteText, div.MsoFootnoteText
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:Times;}
p.MsoCommentText, li.MsoCommentText, div.MsoCommentText
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:Times;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:7.0pt;
	margin-left:0in;
	line-height:14.0pt;
	font-size:9.0pt;
	font-family:"CiscoSans Light",sans-serif;
	color:#58595B;}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{margin:0in;
	margin-bottom:.0001pt;
	line-height:8.5pt;
	font-size:7.0pt;
	font-family:"CiscoSans Light",sans-serif;
	color:#58595B;}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:7.0pt;
	margin-left:0in;
	line-height:9.0pt;
	font-size:7.0pt;
	font-family:"Arial",sans-serif;}
span.MsoFootnoteReference
	{vertical-align:super;}
span.MsoPageNumber
	{font-family:"Arial",sans-serif;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-name:"Title\,Doc Type\,Document Description";
	mso-style-link:"Title Char\,Doc Type Char\,Document Description Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	text-align:right;
	line-height:10.0pt;
	font-size:8.0pt;
	font-family:"Arial",sans-serif;
	color:#6A2B8F;}
p.MsoBodyTextIndent, li.MsoBodyTextIndent, div.MsoBodyTextIndent
	{margin-top:4.0pt;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:.25in;
	font-size:9.0pt;
	font-family:"Courier New";
	color:black;
	layout-grid-mode:line;}
a:link, span.MsoHyperlink
	{color:#00BCEB;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoDocumentMap, li.MsoDocumentMap, div.MsoDocumentMap
	{mso-style-link:"Document Map Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
pre
	{mso-style-link:"HTML Preformatted Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Courier New";}
p.MsoCommentSubject, li.MsoCommentSubject, div.MsoCommentSubject
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:Times;
	font-weight:bold;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma",sans-serif;}
p.MsoRMPane, li.MsoRMPane, div.MsoRMPane
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:Times;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:24.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria",serif;
	color:#365F91;
	font-weight:bold;}
p.TitleHeadline, li.TitleHeadline, div.TitleHeadline
	{mso-style-name:"Title Headline";
	mso-style-link:"Title Headline Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:.25in;
	margin-left:0in;
	line-height:31.0pt;
	font-size:28.0pt;
	font-family:"CiscoSans Light",sans-serif;
	color:#00BCEB;}
p.Intro, li.Intro, div.Intro
	{mso-style-name:Intro;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:7.0pt;
	margin-left:0in;
	line-height:15.0pt;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"CiscoSans",sans-serif;
	color:#005073;}
p.Body, li.Body, div.Body
	{mso-style-name:Body;
	mso-style-link:"Body Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:7.0pt;
	margin-left:0in;
	line-height:14.0pt;
	font-size:9.0pt;
	font-family:"CiscoSans Light",sans-serif;
	color:#58595B;}
span.BodyChar
	{mso-style-name:"Body Char";
	mso-style-link:Body;
	font-family:"CiscoSans Light",sans-serif;
	color:#58595B;}
p.Subhead1, li.Subhead1, div.Subhead1
	{mso-style-name:Subhead1;
	mso-style-link:"Subhead1 Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	line-height:13.0pt;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:"CiscoSans",sans-serif;
	color:#005073;
	font-weight:bold;}
p.Subhead2, li.Subhead2, div.Subhead2
	{mso-style-name:Subhead2;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	line-height:12.0pt;
	page-break-after:avoid;
	font-size:9.0pt;
	font-family:"CiscoSans",sans-serif;
	color:#005073;
	font-weight:bold;}
p.Subhead3, li.Subhead3, div.Subhead3
	{mso-style-name:Subhead3;
	margin-top:9.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:14.0pt;
	page-break-after:avoid;
	font-size:9.0pt;
	font-family:"Arial",sans-serif;}
p.Bullet, li.Bullet, div.Bullet
	{mso-style-name:Bullet;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:.4in;
	text-indent:-.15in;
	line-height:14.0pt;
	font-size:9.0pt;
	font-family:"CiscoSans Light",sans-serif;
	color:#58595B;}
p.Bullet2, li.Bullet2, div.Bullet2
	{mso-style-name:Bullet2;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:.55in;
	text-indent:-.15in;
	line-height:14.0pt;
	font-size:9.0pt;
	font-family:"CiscoSans Light",sans-serif;
	color:#58595B;}
p.Example, li.Example, div.Example
	{mso-style-name:Example;
	margin-top:4.0pt;
	margin-right:0in;
	margin-bottom:4.0pt;
	margin-left:0in;
	line-height:14.0pt;
	font-size:9.0pt;
	font-family:Courier;
	color:black;}
p.Subhead4, li.Subhead4, div.Subhead4
	{mso-style-name:Subhead4;
	margin-top:7.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:15.0pt;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;
	color:#005073;}
p.Subhead5, li.Subhead5, div.Subhead5
	{mso-style-name:Subhead5;
	margin-top:7.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:15.0pt;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;
	color:#005073;
	font-weight:bold;}
p.PullQuotebodyboldSmall, li.PullQuotebodyboldSmall, div.PullQuotebodyboldSmall
	{mso-style-name:"Pull Quote body bold Small";
	mso-style-link:"Pull Quote body bold Small Char";
	margin-top:5.0pt;
	margin-right:.1in;
	margin-bottom:0in;
	margin-left:.1in;
	margin-bottom:.0001pt;
	line-height:18.0pt;
	font-size:14.0pt;
	font-family:"CiscoSans",sans-serif;
	color:#005073;
	font-weight:bold;}
p.CellBulletIndent, li.CellBulletIndent, div.CellBulletIndent
	{mso-style-name:CellBulletIndent;
	margin-top:3.0pt;
	margin-right:2.9pt;
	margin-bottom:3.0pt;
	margin-left:.3in;
	text-indent:-.1in;
	line-height:8.0pt;
	font-size:7.0pt;
	font-family:"Arial",sans-serif;}
span.PullQuotebodyboldSmallChar
	{mso-style-name:"Pull Quote body bold Small Char";
	mso-style-link:"Pull Quote body bold Small";
	font-family:"CiscoSans",sans-serif;
	color:#005073;
	font-weight:bold;}
p.Step1, li.Step1, div.Step1
	{mso-style-name:Step1;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:.5in;
	text-indent:-.5in;
	line-height:12.0pt;
	font-size:9.0pt;
	font-family:"Arial",sans-serif;
	color:black;}
p.Question, li.Question, div.Question
	{mso-style-name:Question;
	mso-style-link:"Question Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.25in;
	margin-bottom:.0001pt;
	text-indent:-.25in;
	line-height:14.0pt;
	page-break-after:avoid;
	font-size:9.0pt;
	font-family:"Arial",sans-serif;
	color:black;}
p.Answer, li.Answer, div.Answer
	{mso-style-name:Answer;
	mso-style-link:"Answer Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:7.0pt;
	margin-left:.25in;
	text-indent:-.25in;
	line-height:14.0pt;
	font-size:9.0pt;
	font-family:"Arial",sans-serif;
	color:black;}
p.StepBody, li.StepBody, div.StepBody
	{mso-style-name:StepBody;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:.5in;
	line-height:14.0pt;
	font-size:9.0pt;
	font-family:"Arial",sans-serif;
	color:black;}
p.CellHead1, li.CellHead1, div.CellHead1
	{mso-style-name:CellHead1;
	margin:3.0pt;
	line-height:8.0pt;
	font-size:8.0pt;
	font-family:"CiscoSans",sans-serif;
	color:white;
	font-weight:bold;}
p.PullQuotebody, li.PullQuotebody, div.PullQuotebody
	{mso-style-name:"Pull Quote body";
	mso-style-link:"Pull Quote body Char";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:18.0pt;
	font-size:14.0pt;
	font-family:"CiscoSans Light",sans-serif;
	color:#58595B;}
p.CellBullet, li.CellBullet, div.CellBullet
	{mso-style-name:CellBullet;
	mso-style-link:"CellBullet Char Char";
	margin-top:3.0pt;
	margin-right:2.9pt;
	margin-bottom:3.0pt;
	margin-left:.2in;
	text-indent:-.1in;
	line-height:8.0pt;
	font-size:7.0pt;
	font-family:"Arial",sans-serif;}
span.PullQuotebodyChar
	{mso-style-name:"Pull Quote body Char";
	mso-style-link:"Pull Quote body";
	font-family:"Arial",sans-serif;
	color:#58595B;}
p.ExecutiveSummary, li.ExecutiveSummary, div.ExecutiveSummary
	{mso-style-name:"Executive Summary";
	margin-top:5.0pt;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:.1in;
	line-height:14.0pt;
	page-break-after:avoid;
	font-size:15.0pt;
	font-family:"CiscoSans Heavy",sans-serif;
	color:#6EBE4A;
	font-weight:bold;}
p.Chartsubhead, li.Chartsubhead, div.Chartsubhead
	{mso-style-name:Chart_subhead;
	mso-style-link:"Chart_subhead Char";
	margin:3.0pt;
	line-height:8.0pt;
	font-size:7.5pt;
	font-family:"CiscoSans",sans-serif;
	color:#58595B;
	font-weight:bold;}
p.Chartbody, li.Chartbody, div.Chartbody
	{mso-style-name:Chart_body;
	mso-style-link:"Chart_body Char";
	margin-top:3.0pt;
	margin-right:2.9pt;
	margin-bottom:3.0pt;
	margin-left:2.9pt;
	line-height:10.0pt;
	font-size:7.5pt;
	font-family:"CiscoSans Light",sans-serif;
	color:#58595B;}
p.Note, li.Note, div.Note
	{mso-style-name:Note;
	margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	text-indent:0in;
	line-height:14.0pt;
	font-size:9.0pt;
	font-family:"Arial",sans-serif;
	color:black;}
p.TableCation, li.TableCation, div.TableCation
	{mso-style-name:TableCation;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:.65in;
	text-indent:-.65in;
	font-size:8.0pt;
	font-family:"Arial",sans-serif;
	color:#58595B;}
p.NumList1, li.NumList1, div.NumList1
	{mso-style-name:NumList1;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:.25in;
	text-indent:-.25in;
	line-height:14.0pt;
	font-size:9.0pt;
	font-family:"Arial",sans-serif;
	color:black;}
p.FigureCaption, li.FigureCaption, div.FigureCaption
	{mso-style-name:FigureCaption;
	mso-style-link:"FigureCaption Char Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:.65in;
	text-indent:-.65in;
	line-height:9.0pt;
	page-break-after:avoid;
	font-size:8.0pt;
	font-family:"Arial",sans-serif;
	color:black;}
span.FigureCaptionCharChar
	{mso-style-name:"FigureCaption Char Char";
	mso-style-link:FigureCaption;
	font-family:"Arial",sans-serif;
	color:black;}
p.NumListBody, li.NumListBody, div.NumListBody
	{mso-style-name:NumListBody;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:.25in;
	line-height:12.0pt;
	font-size:9.0pt;
	font-family:"Arial",sans-serif;
	color:black;}
p.CMPToCLevel1, li.CMPToCLevel1, div.CMPToCLevel1
	{mso-style-name:"CMP ToC Level 1";
	margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	font-size:9.0pt;
	font-family:"Arial",sans-serif;
	color:black;
	font-weight:bold;}
p.Captionhead, li.Captionhead, div.Captionhead
	{mso-style-name:Caption_head;
	margin-top:6.0pt;
	margin-right:.1in;
	margin-bottom:2.0pt;
	margin-left:.1in;
	font-size:10.0pt;
	font-family:"CiscoSans",sans-serif;
	color:#005073;}
p.Copyright, li.Copyright, div.Copyright
	{mso-style-name:Copyright;
	mso-style-link:"Copyright Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:7.0pt;
	margin-left:0in;
	line-height:10.0pt;
	font-size:6.0pt;
	font-family:"CiscoSans Light",sans-serif;
	color:#58595B;}
p.Footnote, li.Footnote, div.Footnote
	{mso-style-name:Footnote;
	mso-style-link:"Footnote Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Arial",sans-serif;
	color:#58595A;}
span.FootnoteChar
	{mso-style-name:"Footnote Char";
	mso-style-link:Footnote;
	font-family:"Arial",sans-serif;
	color:#58595A;}
p.BulletIndent, li.BulletIndent, div.BulletIndent
	{mso-style-name:Bullet_Indent;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:.3in;
	line-height:14.0pt;
	font-size:10.5pt;
	font-family:"CiscoSans",sans-serif;
	color:#58595B;}
p.Bullet2Indent, li.Bullet2Indent, div.Bullet2Indent
	{mso-style-name:Bullet2_Indent;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:.55in;
	line-height:14.0pt;
	font-size:9.0pt;
	font-family:"CiscoSans Light",sans-serif;
	color:#58595B;}
span.CopyrightChar
	{mso-style-name:"Copyright Char";
	mso-style-link:Copyright;
	font-family:"CiscoSans",sans-serif;
	color:#58595B;}
span.TitleHeadlineChar
	{mso-style-name:"Title Headline Char";
	mso-style-link:"Title Headline";
	font-family:"CiscoSans Light",sans-serif;
	color:#00BCEB;}
span.CellBulletCharChar
	{mso-style-name:"CellBullet Char Char";
	mso-style-link:CellBullet;
	font-family:"Arial",sans-serif;}
p.Execsubhead1, li.Execsubhead1, div.Execsubhead1
	{mso-style-name:Exec_subhead1;
	margin:3.0pt;
	line-height:9.0pt;
	font-size:8.0pt;
	font-family:"CiscoSans",sans-serif;
	color:white;
	font-weight:bold;}
p.Logo, li.Logo, div.Logo
	{mso-style-name:Logo;
	margin-top:37.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	text-align:center;
	line-height:14.0pt;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Arial",sans-serif;
	color:white;
	text-transform:uppercase;
	font-weight:bold;}
span.QuestionChar
	{mso-style-name:"Question Char";
	mso-style-link:Question;
	font-family:"Arial",sans-serif;
	color:black;}
span.AnswerChar
	{mso-style-name:"Answer Char";
	mso-style-link:Answer;
	font-family:"Arial",sans-serif;
	color:black;}
span.Superscript
	{mso-style-name:Superscript;
	font-family:"Arial",sans-serif;
	text-decoration:none;
	vertical-align:super;}
p.CellBody, li.CellBody, div.CellBody
	{mso-style-name:CellBody;
	margin-top:2.0pt;
	margin-right:0in;
	margin-bottom:2.0pt;
	margin-left:0in;
	line-height:10.0pt;
	font-size:8.0pt;
	font-family:Helvetica;}
p.ToCContents, li.ToCContents, div.ToCContents
	{mso-style-name:ToC_Contents;
	margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:.25in;
	margin-left:0in;
	line-height:31.0pt;
	font-size:28.0pt;
	font-family:"CiscoSans Light",sans-serif;
	color:#00BCEB;}
p.ToCSectionTitle, li.ToCSectionTitle, div.ToCSectionTitle
	{mso-style-name:ToC_SectionTitle;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:.25in;
	margin-left:0in;
	line-height:31.0pt;
	font-size:28.0pt;
	font-family:"CiscoSans Light",sans-serif;
	color:#00BCEB;}
p.ToCSubhead1, li.ToCSubhead1, div.ToCSubhead1
	{mso-style-name:ToC_Subhead1;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	line-height:13.0pt;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:"CiscoSans",sans-serif;
	color:#005073;
	font-weight:bold;}
p.ToCSubhead2, li.ToCSubhead2, div.ToCSubhead2
	{mso-style-name:ToC_Subhead2;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	line-height:12.0pt;
	page-break-after:avoid;
	font-size:9.0pt;
	font-family:"CiscoSans",sans-serif;
	color:#005073;
	font-weight:bold;}
p.ToCSubhead3, li.ToCSubhead3, div.ToCSubhead3
	{mso-style-name:ToC_Subhead3;
	margin-top:9.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:14.0pt;
	page-break-after:avoid;
	font-size:9.0pt;
	font-family:"Arial",sans-serif;}
p.ToCSubhead4, li.ToCSubhead4, div.ToCSubhead4
	{mso-style-name:ToC_Subhead4;
	margin-top:9.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:15.0pt;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;
	color:#005073;}
p.CMPToCLevel2, li.CMPToCLevel2, div.CMPToCLevel2
	{mso-style-name:"CMP ToC Level 2";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	font-size:9.0pt;
	font-family:"Arial",sans-serif;
	color:black;}
p.CMPToCLevel3, li.CMPToCLevel3, div.CMPToCLevel3
	{mso-style-name:"CMP ToC Level 3";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	font-size:9.0pt;
	font-family:"Arial",sans-serif;
	color:black;}
span.TitleChar
	{mso-style-name:"Title Char\,Doc Type Char\,Document Description Char";
	mso-style-link:"Title\,Doc Type\,Document Description";
	font-family:"Arial",sans-serif;
	color:#6A2B8F;}
p.SidebarCellbullet, li.SidebarCellbullet, div.SidebarCellbullet
	{mso-style-name:Sidebar_Cellbullet;
	margin-top:6.0pt;
	margin-right:2.9pt;
	margin-bottom:6.0pt;
	margin-left:.25in;
	text-indent:-11.5pt;
	line-height:13.0pt;
	font-size:10.5pt;
	font-family:"CiscoSans",sans-serif;
	color:#58595B;}
span.ChartsubheadChar
	{mso-style-name:"Chart_subhead Char";
	mso-style-link:Chart_subhead;
	font-family:"CiscoSans",sans-serif;
	color:#58595B;
	font-weight:bold;}
span.ChartbodyChar
	{mso-style-name:"Chart_body Char";
	mso-style-link:Chart_body;
	font-family:"CiscoSans Light",sans-serif;
	color:#58595B;
	font-weight:normal;}
span.Subhead1Char
	{mso-style-name:"Subhead1 Char";
	mso-style-link:Subhead1;
	font-family:"CiscoSans",sans-serif;
	color:#005073;
	font-weight:bold;}
p.BodySubhead1, li.BodySubhead1, div.BodySubhead1
	{mso-style-name:BodySubhead1;
	mso-style-link:"BodySubhead1 Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	line-height:13.0pt;
	page-break-after:avoid;
	font-size:15.0pt;
	font-family:"CiscoSans Light",sans-serif;
	color:#00BCEB;}
span.BodySubhead1Char
	{mso-style-name:"BodySubhead1 Char";
	mso-style-link:BodySubhead1;
	font-family:"CiscoSans Light",sans-serif;
	color:#00BCEB;
	font-weight:normal;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma",sans-serif;}
p.BodySubhead2, li.BodySubhead2, div.BodySubhead2
	{mso-style-name:BodySubhead2;
	mso-style-link:"BodySubhead2 Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	line-height:12.0pt;
	page-break-after:avoid;
	font-size:9.0pt;
	font-family:"CiscoSans",sans-serif;
	color:#005073;
	font-weight:bold;}
span.BodySubhead2Char
	{mso-style-name:"BodySubhead2 Char";
	mso-style-link:BodySubhead2;
	font-family:"CiscoSans",sans-serif;
	color:#005073;
	font-weight:bold;}
p.Sidebarsubhead1, li.Sidebarsubhead1, div.Sidebarsubhead1
	{mso-style-name:Sidebar_subhead1;
	margin-top:7.0pt;
	margin-right:2.9pt;
	margin-bottom:3.0pt;
	margin-left:2.9pt;
	line-height:14.0pt;
	font-size:10.0pt;
	font-family:"CiscoSans",sans-serif;
	color:#005073;
	font-weight:bold;}
p.SidebarBullet, li.SidebarBullet, div.SidebarBullet
	{mso-style-name:Sidebar_Bullet;
	margin-top:7.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:.3in;
	text-indent:-.15in;
	line-height:10.0pt;
	font-size:9.0pt;
	font-family:"CiscoSans",sans-serif;
	color:#595A5B;}
p.Default, li.Default, div.Default
	{mso-style-name:Default;
	margin:0in;
	margin-bottom:.0001pt;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"CiscoSans Light",sans-serif;
	color:black;}
span.DocumentMapChar
	{mso-style-name:"Document Map Char";
	mso-style-link:"Document Map";}
p.HEAD-TOP, li.HEAD-TOP, div.HEAD-TOP
	{mso-style-name:HEAD-TOP;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	line-height:13.0pt;
	page-break-after:avoid;
	font-size:28.0pt;
	font-family:"CiscoSans Light",sans-serif;
	color:#00BCEB;}
p.HEAD1, li.HEAD1, div.HEAD1
	{mso-style-name:HEAD1;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:7.0pt;
	margin-left:.25in;
	text-indent:-.25in;
	font-size:22.0pt;
	font-family:"CiscoSans",sans-serif;
	color:#005073;
	font-weight:bold;}
p.HEAD2, li.HEAD2, div.HEAD2
	{mso-style-name:HEAD2;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:7.0pt;
	margin-left:0in;
	line-height:14.0pt;
	font-size:14.0pt;
	font-family:"CiscoSans",sans-serif;
	color:#005073;
	font-weight:bold;}
p.Style1, li.Style1, div.Style1
	{mso-style-name:Style1;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:7.0pt;
	margin-left:.25in;
	text-indent:-.25in;
	font-size:22.0pt;
	font-family:"CiscoSans",sans-serif;
	color:#005073;
	font-weight:bold;}
p.HEAD3, li.HEAD3, div.HEAD3
	{mso-style-name:HEAD3;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:7.0pt;
	margin-left:0in;
	line-height:14.0pt;
	font-size:11.0pt;
	font-family:"CiscoSans",sans-serif;
	color:#005073;
	font-weight:bold;}
p.HEAD4, li.HEAD4, div.HEAD4
	{mso-style-name:HEAD4;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:7.0pt;
	margin-left:.55in;
	text-indent:-.55in;
	line-height:14.0pt;
	font-size:9.0pt;
	font-family:"CiscoSans",sans-serif;
	color:#005073;
	font-weight:bold;}
p.BODY0, li.BODY0, div.BODY0
	{mso-style-name:BODY;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:7.0pt;
	margin-left:0in;
	line-height:14.0pt;
	font-size:10.0pt;
	font-family:"CiscoSans Light",sans-serif;
	color:#58595B;}
p.Head20, li.Head20, div.Head20
	{mso-style-name:Head2;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:.55in;
	text-indent:-.55in;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"CiscoSans",sans-serif;
	color:#005073;
	font-weight:bold;}
p.Head30, li.Head30, div.Head30
	{mso-style-name:Head3;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:7.0pt;
	margin-left:.55in;
	text-indent:-.55in;
	line-height:14.0pt;
	font-size:11.0pt;
	font-family:"CiscoSans",sans-serif;
	color:#005073;
	font-weight:bold;}
span.author-242426045
	{mso-style-name:author-242426045;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Cambria",serif;
	color:#365F91;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Cambria",serif;
	color:#243F60;}
span.Heading4Char
	{mso-style-name:"Heading 4 Char";
	mso-style-link:"Heading 4";
	font-family:"Cambria",serif;
	color:#365F91;
	font-style:italic;}
span.HTMLPreformattedChar
	{mso-style-name:"HTML Preformatted Char";
	mso-style-link:"HTML Preformatted";
	font-family:"Courier New";}
p.SourceCode, li.SourceCode, div.SourceCode
	{mso-style-name:"Source Code";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Courier New";}
.MsoChpDefault
	{font-size:10.0pt;}
 /* Page Definitions */
 @page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in .5in .65in .5in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US link="#00BCEB" vlink=purple>

<div class=WordSection1>

<p class=BodySubhead1 style='line-height:normal'><span style='font-size:28.0pt'>IOS-XR
EVPN – Distributed Anycast IRB Gateway, L2/L3VPN Service with MPLS Data Plane </span></p>

<p class=BODY0><b><span style='font-size:18.0pt;color:#1F497D'>&nbsp;</span></b></p>

<p class=BODY0><b><span style='font-size:18.0pt;color:#1F497D'>Table of
Content:</span></b></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc523687333">1.<span style='color:windowtext;font-weight:
normal;text-decoration:none'>     </span>Overview<span style='color:windowtext;
display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>2</span></a></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc523687334">2.<span
style='color:windowtext;font-weight:normal;text-decoration:none'>     </span>Transport<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>3</span></a></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc523687335">3.<span
style='color:windowtext;font-weight:normal;text-decoration:none'>     </span>Services
EVPN – IRB L2/l3VPN Multipoint<span style='color:windowtext;display:none;
text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>4</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc523687336">3.1.<span
style='font-size:12.0pt;color:windowtext;font-weight:normal;text-decoration:
none'>      </span>VRF/IRB Configuration<span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc523687337">3.2.<span
style='font-size:12.0pt;color:windowtext;font-weight:normal;text-decoration:
none'>      </span>EVPN Configuration<span style='color:windowtext;display:
none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc523687338">3.3.<span
style='font-size:12.0pt;color:windowtext;font-weight:normal;text-decoration:
none'>      </span>BGP Configuration<span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc523687339">4.<span
style='color:windowtext;font-weight:normal;text-decoration:none'>     </span>Verification<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>8</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc523687340">4.1.<span
style='font-size:12.0pt;color:windowtext;font-weight:normal;text-decoration:
none'>      </span>Transport<span style='color:windowtext;display:none;
text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>8</span></a></span></p>

<p class=MsoToc2><span class=MsoHyperlink><a href="#_Toc523687341">4.2.<span
style='font-size:12.0pt;color:windowtext;font-weight:normal;text-decoration:
none'>      </span>EVPN Service<span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>9</span></a></span></p>

<p class=MsoToc1><span class=MsoHyperlink><a href="#_Toc523687342">5.<span
style='color:windowtext;font-weight:normal;text-decoration:none'>     </span>Summary<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>12</span></a></span></p>

<p class=MsoNormal><br clear=all style='page-break-before:always'>
<a name="_Toc496667218"></a><a name="_Toc496462402"></a><a name="_Toc495862527"><b><span
style='font-size:22.0pt;font-family:"CiscoSans",sans-serif;color:#005073'>&nbsp;</span></b></a></p>

<p class=HEAD1><a name="_Toc523687333">1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Overview</a></p>

<p class=BODY0>The previous document: “IOS-XR EVPN – Multipoint L2VPN Service
with MPLS Data Plane” described configuration of EVPN – L2VPN multipoint
service with MPLS data plane. </p>

<p class=BODY0>This document will briefly describe how to configure EVPN Distributed
Anycast IRB Gateway for L2/L3VPN service. EVPN Distributed Anycast IRB Gateway
provides transparent Layer3 Multi-Homing without additional protocols such as
ICCP, vPC, VSS, nV Edge Cluster, etc. BGP EVPN is used as a common Control
Plane for MAC, Host IP Address and IP prefixes distribution,  as well as for
Layer2/Layer3 information synchronization, such as MAC address table, ARP and
IGMP. </p>

<p class=BODY0>With this approach, we get optimal Layer3 forwarding together
with simplified Multi-Homed ethernet access configuration.</p>

<p class=BODY0>&nbsp;</p>

<p class=BODY0>Diagram: “lab topology” displays lab topology, which emulates
small Service Provider Data Center.</p>

<p class=BODY0>&nbsp;</p>

<p class=BODY0><img width=422 height=353 id="Picture 1"
src="EVPN_IRB_v2.fld/image001.jpg"></p>

<p class=BODY0>                                                                        <i>lab
topology</i></p>

<p class=BODY0>&nbsp;</p>

<p class=BODY0><b>Devices in the lab: </b></p>

<p class=BODY0 style='margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Two Spines: R34 and R35 – <b>Cisco NCS 5501-SE</b></p>

<p class=BODY0 style='margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Four Leaves: R36, R37, R38 and R39 – <b>Cisco NCS 5501-SE</b></p>

<p class=BODY0 style='margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Two Router Reflectors: RR103 and RR104 – <b>Cisco IOS XRv 9000</b>
</p>

<p class=BODY0 style='margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Two Hosts: H1 and H2, both hosts are dual-homed </p>

<p class=BODY0 style='margin-left:1.0in;text-indent:-.25in'><span
style='font-family:"Courier New"'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span>H1 to R36 and R37 </p>

<p class=BODY0 style='margin-left:1.0in;text-indent:-.25in'><span
style='font-family:"Courier New"'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span>H2 to R38 and R39 </p>

<p class=BODY0>All interfaces are 10Gbps Ethernet connected by direct fiber.  </p>

<p class=BODY0>All devices run <b>Cisco IOS-XR 6.5.1</b> operating system. </p>

<p class=BODY0>&nbsp;</p>

<p class=HEAD1><a name="_Toc523687334">2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Transport</a></p>

<p class=BODY0><span style='color:red'>Please note that transport configuration
stays completely the same as in the previous document: “IOS-XR EVPN –
Multipoint L2VPN Service with MPLS Data Plane”.</span></p>

<p class=BODY0>All devices except H1 and H2 are in the same IGP domain. H1 and
H2 are connected to transparent EVPN – L2VPN multipoint service.</p>

<p class=BODY0>In our testbed, we use ISIS IGP protocol with Segment Routing
extension and MPLS Data Plane. Please note that transport is independent of
service and therefore ISIS can be replaced easily by OSPF without any changes
in the EVPN configuration.</p>

<p class=BODY0>In the below configuration example you can also see Topology
Independent Loop Free Alternate (TI-LFA) for fast convergence in case of any core
link failure or Spine node failure. </p>

<p class=BODY0>&nbsp;</p>

<p class=BODY0><b>ISIS Configuration of Leaf and Spine:</b></p>

<p class=SourceCode>router isis 3</p>

<p class=SourceCode> is-type level-2-only</p>

<p class=SourceCode> net 49.0003.0000.0000.00<b>[two digits router-id].</b>00</p>

<p class=SourceCode> address-family ipv4 unicast</p>

<p class=SourceCode>  metric-style wide</p>

<p class=SourceCode>  segment-routing mpls</p>

<p class=SourceCode> !</p>

<p class=SourceCode> interface Loopback0</p>

<p class=SourceCode>  address-family ipv4 unicast</p>

<p class=SourceCode>   prefix-sid index <b>[two digits router-id]</b></p>

<p class=SourceCode>  !</p>

<p class=SourceCode> !</p>

<p class=SourceCode> interface TenGigE<b>[interface-id]</b> <b>//core interface</b></p>

<p class=SourceCode>  point-to-point</p>

<p class=SourceCode>  address-family ipv4 unicast</p>

<p class=SourceCode>   fast-reroute per-prefix</p>

<p class=SourceCode>   fast-reroute per-prefix ti-lfa</p>

<p class=SourceCode>  !</p>

<p class=SourceCode><b> [Add all core interface]</b></p>

<p class=SourceCode> !</p>

<p class=MsoNormal><span style='font-size:9.0pt;font-family:"Courier New"'>&nbsp;</span></p>

<p class=BODY0>Route Reflectors configuration is without Segment Routing extension,
because Route Reflectors don’t participate in Data Plane forwarding.</p>

<p class=BODY0>&nbsp;</p>

<p class=BODY0><b>ISIS Configuration of Route Reflector:</b></p>

<p class=SourceCode>router isis 3</p>

<p class=SourceCode> is-type level-2-only</p>

<p class=SourceCode> net 49.0003.0000.0000.0<b>[three digits router-id]</b>.00</p>

<p class=SourceCode> address-family ipv4 unicast</p>

<p class=SourceCode>  metric-style wide</p>

<p class=SourceCode> !</p>

<p class=SourceCode> interface Loopback0</p>

<p class=SourceCode>  address-family ipv4 unicast</p>

<p class=SourceCode>  !</p>

<p class=SourceCode> !</p>

<p class=SourceCode> interface TenGigE<b>[interface-id]</b> <b>//core interface</b></p>

<p class=SourceCode>  point-to-point</p>

<p class=SourceCode>  address-family ipv4 unicast</p>

<p class=SourceCode>  !</p>

<p class=SourceCode><b> [Add all core interface]</b></p>

<p class=SourceCode> !</p>

<p class=BODY0>&nbsp;</p>

<p class=BODY0>Please note that it is also highly recommended to configure high
metric on the link from Spines to Route Reflectors to exclude Route Reflectors
from the forwarding path, see configuration example below. Another option is to
single-home each Route Reflector to a different Spine. For example, RR103 to
R34 and R104 to R35.</p>

<p class=BODY0>&nbsp;</p>

<p class=SourceCode>router isis 3 </p>

<p class=SourceCode> interface TenGigE0/0/0/21</p>

<p class=SourceCode>  point-to-point</p>

<p class=SourceCode>  address-family ipv4 unicast</p>

<p class=SourceCode>   metric <b>[high-value in our example 20000]</b></p>

<p class=BODY0>&nbsp;</p>

<p class=BODY0>&nbsp;</p>

<p class=HEAD1><a name="_Toc523687335">3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Services EVPN – IRB L2/l3VPN Multipoint</a> </p>

<p class=BODY0>EVPN uses BGP Control Plane, therefore we will split this
section into three parts: VRF, EVPN and BGP configuration.</p>

<p class=BODY0>&nbsp;</p>

<p class=Head20><a name="_Toc523687336">3.1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>VRF/IRB Configuration</a></p>

<p class=BODY0>The below configuration must be added to prefer Adjacency Information
Base AIB (AIB) over Routing Information Base (RIB). Please note that this
configuration is mandatory in our example.</p>

<p class=BODY0>&nbsp;</p>

<p class=BODY0><b>CEF specific Configuration:</b></p>

<p class=SourceCode>cef adjacency route override rib</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;</p>

<p class=BODY0>Below is an example of VRF configuration.</p>

<p class=BODY0><b>VRF Configuration:</b></p>

<p class=SourceCode>vrf a</p>

<p class=SourceCode> address-family ipv4 unicast</p>

<p class=SourceCode>  import route-target</p>

<p class=SourceCode>   100:100</p>

<p class=SourceCode>  !</p>

<p class=SourceCode>  export route-target</p>

<p class=SourceCode>   100:100</p>

<p class=SourceCode>  !</p>

<p class=SourceCode> !</p>

<p class=SourceCode>!</p>

<p class=SourceCode>&nbsp;</p>

<p class=BODY0>Because of Distributed Anycast Gateway, both R36 and R37 have to
configure the same BVI MAC and IP Address. Similarly R38 and R39 have to also configure
the same BVI MAC and IP Address. See an example of R36 and R37 configuration below.</p>

<p class=SourceCode>&nbsp;</p>

<p class=BODY0><b>IRB Configuration:</b></p>

<p class=SourceCode>interface BVI100</p>

<p class=SourceCode> host-routing <b>//generate host route</b></p>

<p class=SourceCode> vrf a</p>

<p class=SourceCode> ipv4 address 192.168.1.1 255.255.255.0 //</p>

<p class=SourceCode> mac-address 3637.3637.3637 </p>

<p class=SourceCode><b> // R36 and R37 BVI MAC, R38 and R39 has to also use
common BVI MAC</b></p>

<p class=SourceCode>!</p>

<p class=SourceCode>&nbsp;</p>

<p class=Head20><a name="_Toc523687337">3.2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>EVPN Configuration</a></p>

<p class=BODY0>We will use the basic configuration from the previous document:
“IOS-XR EVPN – Multipoint L2VPN Service with MPLS Data Plane”. </p>

<p class=BODY0>This section will focus on EVPN specific configuration together
with Bridge-Domain configuration.</p>

<p class=BODY0>Host H1 is dual-homed by Leaves R36 and R37. Similarly, Host H2
is dual-homed by Leaves R38 and R39. Because both Hosts are transparently
connected via LACP Port-Channel, each Leaf pair has to use the same LACP System
MAC Address. See an example of R36 and R37 configuration below.</p>

<p class=BODY0>&nbsp;</p>

<p class=BODY0><b>Leaf LACP System MAC Configuration:</b></p>

<p class=SourceCode>lacp system mac 3637.3637.3637</p>

<p class=SourceCode>&nbsp;</p>

<p class=BODY0><b>Interface Bundle-Ether Configuration:</b></p>

<p class=SourceCode>interface TenGigE0/0/0/0</p>

<p class=SourceCode> bundle id 100 mode active</p>

<p class=SourceCode>!</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>interface Bundle-Ether100</p>

<p class=SourceCode> l2transport</p>

<p class=SourceCode> !</p>

<p class=SourceCode>!</p>

<p class=SourceCode>&nbsp;</p>

<p class=BODY0>We will break L2 stretch between two pairs of Leaves to
demonstrate routing between purple and red subnets visualized in the lab
diagram. Leaves R36 and R37 will use EVPN instance 100 (evi 100). Leaves R37
and R38 will use EVPN instance 101 (evi 101). </p>

<p class=BODY0>Route-Type 2 (RT-2) will advertise MAC address learned through
access interface by Leaves’ Data Plane together with Host IP Address.</p>

<p class=BODY0>To prevent core isolation, all MPLS core interfaces are in
core-isolation-group 1. Interface Bundle-Ether100 is the access interface and the
configuration below shows how to manually specify the Ethernet Service
Identifier (ESI) which is important for the multi-homed scenario covered in our
testbed. Please note that in the case of a single-homed device, the ESI value is
usually 0 (default value), therefore there is no ESI configuration. </p>

<p class=BODY0><b>&nbsp;</b></p>

<p class=BODY0><b>Leaf EVPN Configuration:</b></p>

<p class=MsoNormal><span style='font-size:9.0pt;font-family:"Courier New"'>&nbsp;</span></p>

<p class=SourceCode>evpn</p>

<p class=SourceCode> evi 100 <b>//R36 and R37 use EVI 100, R38 and R39 use EVI
101</b> </p>

<p class=SourceCode>  advertise-mac <b>//generate BGP EVPN RT-2</b></p>

<p class=SourceCode>  !</p>

<p class=SourceCode> !</p>

<p class=SourceCode> group 1</p>

<p class=SourceCode>  core interface TenGigE<b>[interface-id]</b></p>

<p class=SourceCode>  core interface TenGigE<b>[interface-id]</b></p>

<p class=SourceCode> !</p>

<p class=SourceCode> interface Bundle-Ether100</p>

<p class=SourceCode>  ethernet-segment</p>

<p class=SourceCode>   identifier type 0 36.37.00.00.00.00.00.11.00 </p>

<p class=SourceCode>   <b>//R36 and R37 ESI. R38 and R39 use different, but
also common ESI</b></p>

<p class=SourceCode>  !</p>

<p class=SourceCode>  core-isolation-group 1</p>

<p class=SourceCode> !</p>

<p class=BODY0>&nbsp;</p>

<p class=BODY0>The Bridge-Domain configuration example below shows how to specify
new Bridge-Domain 100 and add access interface Bundle-Ether100 and evi 100
together with BVI100.</p>

<p class=BODY0>&nbsp;</p>

<p class=BODY0><b>Leaf Bridge-Domain Configuration:</b></p>

<p class=SourceCode>l2vpn</p>

<p class=SourceCode> bridge group 100</p>

<p class=SourceCode>  bridge-domain 100</p>

<p class=SourceCode>   interface Bundle-Ether100</p>

<p class=SourceCode>   !</p>

<p class=SourceCode>   routed interface BVI100</p>

<p class=SourceCode>   !</p>

<p class=SourceCode>   evi 100 <b>//R36 and R37 use EVI 100, R38 and R39 use
EVI 101</b></p>

<p class=SourceCode>   !</p>

<p class=SourceCode>  !</p>

<p class=SourceCode> !</p>

<p class=SourceCode>!</p>

<p class=Head20><a name="_Toc523687338">3.3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>BGP Configuration</a></p>

<p class=BODY0>&nbsp;</p>

<p class=BODY0>Each Leaf has a BGP (Address Family EVPN) session with two dedicated
Route Reflectors. Please note that it is highly recommended to also use
dedicated Route Reflectors in your production network. Spine node should remain
BGP-free, as should the core Provider router. </p>

<p class=BODY0>VRF configuration must also be added, together with connected routes
redistribution. This will generate RT-2 (MAC, Host IP Address) with
route-target specified in VRF configuration, in our example, route-target
100:100. This will allow us to import the host routes to VRF on remote Leaves.</p>

<p class=BODY0>&nbsp;</p>

<p class=BODY0><b>Leaf BGP Configuration:</b></p>

<p class=SourceCode>router bgp 1</p>

<p class=SourceCode> bgp router-id 3.3.3.<b>[two digits router-id]</b></p>

<p class=SourceCode> address-family vpnv4 unicast <b>//VPNv4 must be configured
to allow VRF configuration</b></p>

<p class=SourceCode> !</p>

<p class=SourceCode> address-family l2vpn evpn</p>

<p class=SourceCode> !</p>

<p class=SourceCode> neighbor-group rr</p>

<p class=SourceCode>  remote-as 1</p>

<p class=SourceCode>  update-source Loopback0</p>

<p class=SourceCode>  address-family l2vpn evpn</p>

<p class=SourceCode>  !</p>

<p class=SourceCode> !</p>

<p class=SourceCode> neighbor 3.3.3.<b>[three digits router-id]</b> <b>//Route
Reflector</b></p>

<p class=SourceCode>  use neighbor-group rr</p>

<p class=SourceCode> !</p>

<p class=SourceCode><b> [Add all Route Reflectors]</b></p>

<p class=SourceCode> vrf a</p>

<p class=SourceCode>  rd auto</p>

<p class=SourceCode>  address-family ipv4 unicast</p>

<p class=SourceCode>   additional-paths receive <b>//allow BGP Multi-Path</b></p>

<p class=SourceCode>   maximum-paths ibgp 2 <b>//allow BGP Multi-Path</b></p>

<p class=SourceCode>   redistribute connected</p>

<p class=SourceCode>  !</p>

<p class=SourceCode> !<b> </b></p>

<p class=SourceCode>!</p>

<p class=BODY0><b>&nbsp;</b></p>

<p class=BODY0><b>Router Reflector BGP Configuration:</b></p>

<p class=SourceCode>router bgp 1</p>

<p class=SourceCode> bgp router-id 3.3.3.<b>[router-id]</b></p>

<p class=SourceCode> address-family l2vpn evpn</p>

<p class=SourceCode> !­­</p>

<p class=SourceCode> neighbor-group leaf</p>

<p class=SourceCode>  remote-as 1</p>

<p class=SourceCode>  update-source Loopback0</p>

<p class=SourceCode>  address-family l2vpn evpn</p>

<p class=SourceCode>   route-reflector-client</p>

<p class=SourceCode>  !</p>

<p class=SourceCode> !</p>

<p class=SourceCode> neighbor 3.3.3.<b>[leaf router-id]</b></p>

<p class=SourceCode>  use neighbor-group leaf</p>

<p class=SourceCode> !</p>

<p class=SourceCode><b> [Add all leaves]</b></p>

<p class=SourceCode>!</p>

<p class=MsoNormal><span style='font-size:9.0pt;font-family:"Courier New"'>&nbsp;</span></p>

<p class=BODY0>This step is the last one to successfully configure L2/L3VPN Multi-Homed
EVPN Service with Distributed Anycast IRB.</p>

<p class=MsoNormal><span style='font-size:9.0pt;font-family:"Courier New"'>&nbsp;</span></p>

<p class=HEAD1><a name="_Toc523687339">4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Verification</a></p>

<p class=BODY0>This section shows how to quickly verify EVPN service end-to-end.</p>

<p class=Head20><a name="_Toc523687340">4.1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Transport</a></p>

<p class=BODY0>Each Leaf should see entries in FIB for all other Leaves. The example
below shows entry for 3.3.3.37 which is loopback 0 of R37. R37 is reachable via
the ECMP path through Spines R34 and R35. Links and Spine nodes are also
protected by TI-LFA. Label imposition is very important because it shows
particular transport prefix-SID (MPLS Data Plane). </p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:9.0pt;
font-family:"Courier New"'>&nbsp;</span></p>

<p class=SourceCode>RP/0/RP0/CPU0:R36#<b>show cef 3.3.3.37</b></p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>3.3.3.37/32, version 578, labeled SR, internal 0x1000001
0x81 (ptr 0x97c167a8) [1], 0x0 (0x97dd9ce8), 0xa28 (0x98c00378)</p>

<p class=SourceCode> Updaed Aug 13 22:48:54.216</p>

<p class=SourceCode> local adjacency 35.36.1.35</p>

<p class=SourceCode> Prefix Len 32, traffic index 0, precedence n/a, priority 1</p>

<p class=SourceCode>   via 35.36.1.35/32, <b>TenGigE0/0/0/39</b>, 10
dependencies, weight 0, class 0, <b>protected, ECMP-backup (Local-LFA)</b>
[flags 0x600]</p>

<p class=SourceCode>    path-idx 0 bkup-idx 1 NHID 0x0 [0x98b7f6d0 0x0]</p>

<p class=SourceCode>    next hop 35.36.1.35/32</p>

<p class=SourceCode>     <b>local label 16037      labels imposed {16037}</b></p>

<p class=SourceCode>   via 34.36.1.34/32, <b>TenGigE0/0/0/38</b>, 10
dependencies, weight 0, class 0, <b>protected, ECMP-backup (Local-LFA)</b>
[flags 0x600]</p>

<p class=SourceCode>    path-idx 1 bkup-idx 0 NHID 0x0 [0x98b7f350 0x0]</p>

<p class=SourceCode>    next hop 34.36.1.34/32</p>

<p class=SourceCode>     <b>local label 16037      labels imposed {16037}</b></p>

<p class=BODY0><span style='font-family:"Courier New";color:windowtext'>&nbsp;</span></p>

<p class=BODY0>Spines are responsible for label swapping, therefor LFIB entry
is the most important from a transport point of view. The example below shows LFIB
entry of 16036 (prefix-SID of loopback 0 on R36) executed on R34, together with
backup path created by TI-LFA.</p>

<p class=BODY0>&nbsp;</p>

<p class=SourceCode>RP/0/RP0/CPU0:R34#<b>show mpls forwarding</b></p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>Local  Outgoing    Prefix             Outgoing     Next
Hop        Bytes</p>

<p class=SourceCode>Label  Label       or ID             
Interface                   Switched</p>

<p class=SourceCode>------ ----------- ------------------ ------------
--------------- ------------</p>

<p class=SourceCode><b>16036  Pop  </b>       SR Pfx (idx 36)    Te0/0/0/16  
34.36.1.36      0</p>

<p class=SourceCode>       <b>16035  </b>     SR Pfx (idx 36)    Te0/0/0/17  
34.37.1.37      0            (!)</p>

<p class=BODY0><span style='font-family:"Courier New";color:windowtext'>&nbsp;</span></p>

<p class=Head20><a name="_Toc523687341">4.2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>EVPN Service</a></p>

<p class=BODY0>Each Leaf should have two active BGP EVPN sessions with each of both
Route Reflectors. </p>

<p class=BODY0><span style='font-family:"Courier New";color:windowtext'>&nbsp;</span></p>

<p class=SourceCode>RP/0/RP0/CPU0:R36#<b>show bgp l2vpn evpn summary</b></p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>BGP router identifier 3.3.3.36, local AS number 1</p>

<p class=SourceCode>BGP generic scan interval 60 secs</p>

<p class=SourceCode>Non-stop routing is enabled</p>

<p class=SourceCode>BGP table stat: Active</p>

<p class=SourceCode>Table ID: 0x0   RD version: 0</p>

<p class=SourceCode>BGP main routing table version 14814</p>

<p class=SourceCode>BGP NSR Initial initsync version 1 (Reached)</p>

<p class=SourceCode>BGP NSR/ISSU Sync-Group versions 0/0</p>

<p class=SourceCode>BGP scan interval 60 secs</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>BGP is operating in STANDALONE mode.</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>Process       RcvTblVer   bRIB/RIB   LabelVer  ImportVer 
SendTblVer  StandbyVer</p>

<p class=SourceCode>Speaker           14814      14814      14814     
14814       14814           0</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>Neighbor        Spk    AS MsgRcvd MsgSent   TblVer  InQ
OutQ  Up/Down  St/PfxRcd</p>

<p class=SourceCode><b>3.3.3.103</b>         0     1   25826   21481   
14814    0    0 00:04:35         12</p>

<p class=SourceCode><b>3.3.3.104</b>         0     1   25850   21482   
14814    0    0 00:04:42         12</p>

<p class=BODY0><span style='font-family:"Courier New";color:windowtext'>&nbsp;</span></p>

<p class=BODY0>The example below shows how to verify the Ethernet Segment
Identifier (ESI) configuration. ESI 0036.3700.0000.0000.1100 is Multi-Homed via
3.3.3.36 (R36) and 3.3.3.37 (R37). </p>

<p class=BODY0><span style='font-family:"Courier New";color:windowtext'>&nbsp;</span></p>

<p class=SourceCode>RP/0/RP0/CPU0:R36#<b>show evpn ethernet-segment</b></p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>Ethernet Segment Id      Interface                         
Nexthops</p>

<p class=SourceCode>------------------------ ----------------------------------
--------------------</p>

<p class=SourceCode><b>0036.3700.0000.0000.1100
BE100                              3.3.3.36</b></p>

<p class=SourceCode><b>                                                            3.3.3.37</b></p>

<p class=MsoNormal style='text-autospace:none'><b><span style='font-size:9.0pt;
font-family:"Courier New"'>&nbsp;</span></b></p>

<p class=BODY0>The next example shows details of ESI 0036.3700.0000.0000.1100. This
ESI is in Multi-Homed (MH) All-Active mode. </p>

<p class=BODY0><span style='font-family:"Courier New";color:windowtext'>&nbsp;</span></p>

<p class=SourceCode>RP/0/RP0/CPU0:R36#<b>show evpn ethernet-segment esi
0036.3700.0000.0000.1100 detail</b></p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>Legend:</p>

<p class=SourceCode>  B   - No Forwarders EVPN-enabled,</p>

<p class=SourceCode>  C   - Backbone Source MAC missing (PBB-EVPN),</p>

<p class=SourceCode>  RT  - ES-Import Route Target missing,</p>

<p class=SourceCode>  E   - ESI missing,</p>

<p class=SourceCode>  H   - Interface handle missing,</p>

<p class=SourceCode>  I   - Name (Interface or Virtual Access) missing,</p>

<p class=SourceCode>  M   - Interface in Down state,</p>

<p class=SourceCode>  O   - BGP End of Download missing,</p>

<p class=SourceCode>  P   - Interface already Access Protected,</p>

<p class=SourceCode>  Pf  - Interface forced single-homed,</p>

<p class=SourceCode>  R   - BGP RID not received,</p>

<p class=SourceCode>  S   - Interface in redundancy standby state,</p>

<p class=SourceCode>  X   - ESI-extracted MAC Conflict</p>

<p class=SourceCode>  SHG - No local split-horizon-group label allocated</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>Ethernet Segment Id      Interface                         
Nexthops</p>

<p class=SourceCode>------------------------ ----------------------------------
--------------------</p>

<p class=SourceCode><b>0036.3700.0000.0000.1100
BE100                              3.3.3.36</b></p>

<p class=SourceCode><b>                                                           
3.3.3.37</b></p>

<p class=SourceCode>  ES to BGP Gates   : Ready</p>

<p class=SourceCode>  ES to L2FIB Gates : Ready</p>

<p class=SourceCode>  Main port         :</p>

<p class=SourceCode>     Interface name : Bundle-Ether100</p>

<p class=SourceCode>     Interface MAC  : 008a.9644.d8dd</p>

<p class=SourceCode>     IfHandle       : 0x0800001c</p>

<p class=SourceCode>     State          : Up</p>

<p class=SourceCode>     Redundancy     : Not Defined</p>

<p class=SourceCode>  ESI type          : 0</p>

<p class=SourceCode>     Value          : 36.3700.0000.0000.1100</p>

<p class=SourceCode>  ES Import RT      : 3637.0000.0000 (from ESI)</p>

<p class=SourceCode>  Source MAC        : 0000.0000.0000 (N/A)</p>

<p class=SourceCode>  Topology          :</p>

<p class=SourceCode>     <b>Operational    : MH, All-active</b></p>

<p class=SourceCode>     Configured     : All-active (AApF) (default)</p>

<p class=SourceCode>  Service Carving   : Auto-selection</p>

<p class=SourceCode>  Peering Details   : 3.3.3.36[MOD:P:00] 3.3.3.37[MOD:P:00]</p>

<p class=SourceCode>  Service Carving Results:</p>

<p class=SourceCode>     Forwarders     : 1</p>

<p class=SourceCode>     Permanent      : 0</p>

<p class=SourceCode>     <b>Elected        : 1</b></p>

<p class=SourceCode>     Not Elected    : 0</p>

<p class=SourceCode>  MAC Flushing mode : STP-TCN</p>

<p class=SourceCode>  Peering timer     : 3 sec [not running]</p>

<p class=SourceCode>  Recovery timer    : 30 sec [not running]</p>

<p class=SourceCode>  Carving timer     : 0 sec [not running]</p>

<p class=SourceCode><b>  Local SHG label   : 64005</b></p>

<p class=SourceCode><b>  Remote SHG labels : 1</b></p>

<p class=SourceCode><b>              64005 : nexthop 3.3.3.37</b></p>

<p class=BODY0>&nbsp;</p>

<p class=BODY0>The next example shows MAC and Host IP Address learned locally
or via BGP Control Plane.</p>

<p class=BODY0>&nbsp;</p>

<p class=SourceCode>RP/0/RP0/CPU0:R36#<b>show evpn evi mac</b></p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>VPN-ID     Encap  MAC address    IP address         
Nexthop                Label</p>

<p class=SourceCode>---------- ------ -------------- -------------------
---------------------- --------</p>

<p class=SourceCode>100        MPLS   0062.ec71.fbd7 ::                 
Bundle-Ether100        64004</p>

<p class=SourceCode><b>100        MPLS   0062.ec71.fbd7 192.168.1.10       
Bundle-Ether100        64004</b></p>

<p class=SourceCode>100        MPLS   0062.ec71.fbd8 ::                 
Bundle-Ether100        64004</p>

<p class=SourceCode>100        MPLS   0062.ec71.fbd9 ::                 
3.3.3.37               64004</p>

<p class=SourceCode>100        MPLS   3637.3637.3637 ::                 
BVI100                 64004</p>

<p class=SourceCode>65535      N/A    008a.9644.d8d8 ::                 
Local                  0</p>

<p class=SourceCode>&nbsp;</p>

<p class=BODY0>The next example shows VRF routing table. Host Route
192.168.2.10 (H2) is learned via BGP EVPN Control Plane (RT-2)</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>RP/0/RP0/CPU0:R36#<b>show route vrf a</b></p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>Codes: C - connected, S - static, R - RIP, B - BGP, (&gt;)
- Diversion path</p>

<p class=SourceCode>       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF
inter area</p>

<p class=SourceCode>       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA
external type 2</p>

<p class=SourceCode>       E1 - OSPF external type 1, E2 - OSPF external type
2, E - EGP</p>

<p class=SourceCode>       i - ISIS, L1 - IS-IS level-1, L2 - IS-IS level-2</p>

<p class=SourceCode>       ia - IS-IS inter area, su - IS-IS summary null, * -
candidate default</p>

<p class=SourceCode>       U - per-user static route, o - ODR, L - local, G  -
DAGR, l - LISP</p>

<p class=SourceCode>       A - access/subscriber, a - Application route</p>

<p class=SourceCode>       M - mobile route, r - RPL, t - Traffic Engineering,
(!) - FRR Backup path</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>Gateway of last resort is not set</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>C    192.168.1.0/24 is directly connected, 08:42:24, BVI100</p>

<p class=SourceCode>L    192.168.1.1/32 is directly connected, 08:42:24, BVI100</p>

<p class=SourceCode><b>a    192.168.1.10/32</b> [2/0] via 192.168.1.10,
00:05:35, BVI100</p>

<p class=SourceCode><b>B    192.168.2.10/32 [200/0] via 3.3.3.38 (nexthop in
vrf default), 00:22:51</b></p>

<p class=SourceCode><b>                     [200/0] via 3.3.3.39 (nexthop in
vrf default), 00:22:51</b></p>

<p class=BODY0>&nbsp;</p>

<p class=BODY0>The next example shows details of BGP RT-2, particularly RT-2
advertised by Leaf R38.  See Route-Target 1:101, which is the default
auto-generated Route-Target for EVI 101, but see also the Route-Target 100:100
specified in VRF configuration.</p>

<p class=BODY0>&nbsp;</p>

<p class=SourceCode>RP/0/RP0/CPU0:R36#<b>show bgp l2vpn evpn rd 3.3.3.38:101</b>
[2][0][48][0062.ec71.1000][32][192.168.2.10]/136</p>

<p class=SourceCode>&nbsp;</p>

<p class=SourceCode>BGP routing table entry for
[2][0][48][0062.ec71.1000][32][192.168.2.10]/136, Route Distinguisher:
3.3.3.38:101</p>

<p class=SourceCode>Versions:</p>

<p class=SourceCode>  Process           bRIB/RIB  SendTblVer</p>

<p class=SourceCode>  Speaker              40028       40028</p>

<p class=SourceCode>Last Modified: Aug 31 04:11:21.399 for 00:26:54</p>

<p class=SourceCode>Paths: (2 available, best #1)</p>

<p class=SourceCode>  Not advertised to any peer</p>

<p class=SourceCode>  Path #1: Received by speaker 0</p>

<p class=SourceCode>  Not advertised to any peer</p>

<p class=SourceCode>  Local</p>

<p class=SourceCode>    3.3.3.38 (metric 30) from 3.3.3.103 (3.3.3.38)</p>

<p class=SourceCode>      Received Label 64008, Second Label 64004</p>

<p class=SourceCode>      Origin IGP, localpref 100, valid, internal, best,
group-best, import-candidate, not-in-vrf</p>

<p class=SourceCode>      Received Path ID 0, Local Path ID 1, version 40028</p>

<p class=SourceCode>      Extended community: Flags 0x1e: SoO:3.3.3.39:101 <b>RT:1:101
RT:100:100</b></p>

<p class=SourceCode>      Originator: 3.3.3.38, Cluster list: 3.3.3.103</p>

<p class=SourceCode>      EVPN ESI: 0038.3900.0000.0000.1100</p>

<p class=SourceCode>  Path #2: Received by speaker 0</p>

<p class=SourceCode>  Not advertised to any peer</p>

<p class=SourceCode>  Local</p>

<p class=SourceCode>    3.3.3.38 (metric 30) from 3.3.3.104 (3.3.3.38)</p>

<p class=SourceCode>      Received Label 64008, Second Label 64004</p>

<p class=SourceCode>      Origin IGP, localpref 100, valid, internal,
not-in-vrf</p>

<p class=SourceCode>      Received Path ID 0, Local Path ID 0, version 0</p>

<p class=SourceCode>      Extended community: Flags 0x1e: SoO:3.3.3.39:101 <b>RT:1:101
RT:100:100</b></p>

<p class=SourceCode>      Originator: 3.3.3.38, Cluster list: 3.3.3.104</p>

<p class=SourceCode>      EVPN ESI: 0038.3900.0000.0000.1100</p>

<p class=BODY0>&nbsp;</p>

<p class=BODY0>You can use the example below to see all the BGP EVPN routes,.</p>

<p class=SourceCode>RP/0/RP0/CPU0:R36#<b>show bgp l2vpn evpn</b></p>

<p class=BODY0>BGP EVPN Control Plane detail will be covered in a separate
document.</p>

<p class=BODY0>&nbsp;</p>

<p class=HEAD1><a name="_Toc523687342">5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Summary</a></p>

<p class=BODY0>This document shows how to configure Distributed Anycast IRB Gateway
on the top of Multi-Homed EVPN service described in the document: “IOS-XR EVPN
– Multipoint L2VPN Service with MPLS Data Plane”.</p>

<p class=BODY0>&nbsp;</p>

<p class=BODY0>&nbsp;</p>

<p class=BODY0>&nbsp;</p>

</div>

</body>

</html>
